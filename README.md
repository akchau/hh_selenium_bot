# hh_selenium_bot — Документация

## Описание
`hh_selenium_bot` — это автоматизированная программа для сбора данных с сайта [hh.ru](https://hh.ru), написанная на Python с использованием библиотеки [Selenium](https://www.selenium.dev/documentation/). Бот умеет:
- Авторизовываться по логину и паролю.
- Искать вакансии по заданному запросу.
- Переходить на страницы вакансий.
- Парсить ключевые данные: название, компанию, зарплату, опыт работы, формат работы и т.д.
- Сохранять результаты в файлы (например, Excel).

Проект может использоваться для анализа рынка труда, подбора подходящих вакансий или интеграции в рекрутинговые системы.

---

## Содержание

1. [Функционал](#функционал)
2. [Установка и запуск](#установка-и-запуск)
3. [Настройка](#настройка)
4. [Примеры использования](#примеры-использования)
5. [Технические детали](#технические-детали)

---

## Функционал

### 1. **Авторизация**
Бот может авторизоваться на сайте `hh.ru` через email и пароль, используя современные методы взаимодействия с интерфейсом сайта.

### 2. **Поиск вакансий**
Поддерживается поиск вакансий по текстовому запросу (например, "Python разработчик").

### 3. **Обход страниц**
Бот умеет переходить на следующие страницы выдачи вакансий, чтобы собрать максимум данных.

### 4. **Парсинг данных**
Для каждой вакансии извлекаются:
- Название вакансии
- Название компании
- Зарплата
- Требуемый опыт работы
- Формат работы (удалёнка, офис и т.д.)
- Ссылка на вакансию

### 5. **Сохранение данных**
Результаты можно сохранять в различных форматах (в проекте реализован вывод в Excel через `openpyxl`).

### 6. **Логирование**
Все действия бота подробно логируются. Поддерживается цветное и структурированное логирование.

---

## Установка и запуск

### 1. **Локально**

#### 1.1. Установите зависимости:
```bash
pip install -r req.txt
```

#### 1.2. Убедитесь, что у вас установлен драйвер браузера:
- Для Chrome: [ChromeDriver](https://chromedriver.chromium.org/)
- Для Firefox: [GeckoDriver](https://github.com/mozilla/geckodriver)

#### 1.3. Запустите основной скрипт:
```bash
python main.py
```

---

## Настройка

Настройки производятся через `.env` файл или переменные окружения.

| Переменная            | Описание                                                                 | Пример значения |
|----------------------|--------------------------------------------------------------------------|------------------|
| `HH_EMAIL`           | Email для авторизации на hh.ru                                           | `user@example.com` |
| `HH_PASSWORD`        | Пароль от аккаунта hh.ru                                                 | `your_password`  |
| `SEARCH_QUERY`       | Поисковый запрос для поиска вакансий                                     | `"Python разработчик"` |
| `MAX_PAGES`          | Максимальное количество страниц для обработки                            | `5`              |
| `LOG_LEVEL`          | Уровень логирования (`DEBUG`, `INFO`, `WARNING`, `ERROR`)                | `INFO`           |

> Пример: см. `example.env`

---

## Примеры использования

### 1. **Запуск полного цикла поиска и парсинга**
```bash
python main.py
```
Бот выполнит:
- Авторизацию
- Поиск по запросу "Python разработчик"
- Обработку первых 2 страниц (по умолчанию)
- Сохранение результата в Excel-файл

### 2. **Изменение количества страниц**
Отредактируйте `main.py`:
```python
max_pages = 5  # вместо 2
```

### 3. **Сохранение в другой формат**
Можно расширить класс `BaseFileSaver` и реализовать свой способ сохранения (CSV, JSON, SQL и т.д.).

---

## Технические детали

### 1. **Структура проекта**
```
.
├── main.py                 # Точка входа, запуск бота
├── settings.py             # Настройки через переменные окружения
├── logger.py               # Настройка логгирования
├── base.py                 # Базовые абстрактные классы
├── tps.py                  # Модель данных (VacancyType)
├── scripts/
│   ├── auth_via_email.py   # Авторизация через email и пароль
│   ├── search_vacancy.py   # Поиск вакансий
│   ├── collect_vacancy_links.py  # Сбор ссылок на вакансии
│   ├── go_to_next_page.py  # Переход на следующую страницу
│   └── parse_vacancy.py    # Парсинг данных о вакансии
├── file_savers/
│   ├── excel_saver.py      # Сохранение в Excel
│   └── __init__.py
├── .env / example.env      # Файлы с переменными окружения
└── req.txt                 # Список зависимостей
```

### 2. **Библиотеки**
- `selenium` — управление браузером
- `pandas`, `openpyxl` — работа с таблицами и сохранение в Excel
- `python-dotenv` — чтение переменных окружения из `.env`
- `coloredlogs` — цветное логирование
- `pydantic` — модели данных
- `webdriver-manager` — автоматическая установка драйверов (не указан в req.txt, но может быть добавлен)

---

## Лицензия

Проект распространяется под MIT License. Подробности — в файле `LICENSE`.

---
